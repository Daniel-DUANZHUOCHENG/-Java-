name: CI with Email Notification

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
      
      - name: æ‰§è¡ŒæˆåŠŸæ“ä½œ
        run: echo "CIæµç¨‹æˆåŠŸé€šè¿‡ï¼"
      
      - name: å‘é€æˆåŠŸé‚®ä»¶
        uses: dawidd6/action-send-mail@v3
        if: success()  # ä»…åœ¨æˆåŠŸæ—¶å‘é€
        with:
          server_address: smtp.gmail.com
          server_port: 465
          username: ${{ secrets.EMAIL_USERNAME }}
          password: ${{ secrets.EMAIL_PASSWORD }}
          subject: âœ… CIæµç¨‹æˆåŠŸé€šçŸ¥
          body: |
            ğŸ‰ æ‰€æœ‰ä»»åŠ¡å·²æˆåŠŸå®Œæˆï¼
            
            **çŠ¶æ€**: å…¨éƒ¨é€šè¿‡
            è§¦å‘äº‹ä»¶: ${{ github.event_name }}
            æäº¤SHA: ${{ github.sha }}
            æäº¤è€…: ${{ github.actor }}
            
            æŸ¥çœ‹è¯¦æƒ…: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}
            
            æ­¤è‡´ï¼Œ
            GitHub Actions Bot
          to: recipient@example.com
          from: GitHub Actions
          secure: true
